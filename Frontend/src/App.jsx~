import {AuthProvider} from "./context/AuthContext.jsx";
import {ChatProvider} from "./context/ChatContext.jsx";
import {BrowserRouter, Navigate, Route, Routes} from "react-router-dom";
import ProtectedRoute from "./components/ProtectedRoute/ProtectedRoute.jsx";
import AuthPage from "./pages/AuthPage/AuthPage.jsx";
import ChatPage from "./components/chat/ChatPage/ChatPage.jsx";
import {MainPage} from "./pages/MainPage/MainPage.jsx";


function App() {
    return (
        <AuthProvider>
            <ChatProvider>
                <BrowserRouter>
                    <Routes>
                        <Route path="/auth/*" element={<AuthPage/>}/>
                        <Route path="/" element={
                            <ProtectedRoute>
                                <MainPage/>
                            </ProtectedRoute>
                        }>
                            <Route index element={
                                <div className="welcome-screen">
                                    <h2 className="welcome-screen__title">Добро пожаловать в Web Chat</h2>
                                    <p>Выберите чат из списка</p>
                                </div>
                            }/>
                            <Route path="chat/:chatName" element={<ChatPage/>}/>
                        </Route>
                        <Route path="/login" element={<Navigate to="/auth/login" replace/>}/>
                    </Routes>
                </BrowserRouter>
            </ChatProvider>
        </AuthProvider>
    )
}

export default App
